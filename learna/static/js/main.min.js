svg4everybody();

(function () {
  var isIE11 = !!window.MSInputMethodContext && !!document.documentMode;

  var stickFooter = function () {
    var FOOTER = document.querySelector('footer');
    var MAIN = document.querySelector('main');
    var BODY = document.querySelector('body');
    var footerHeight = FOOTER.offsetHeight;
    BODY.style.position = 'relative';
    MAIN.style.marginBottom = footerHeight + 'px';
    FOOTER.style.position = 'absolute';
    FOOTER.style.bottom = '0';
    FOOTER.style.left = '0';
    FOOTER.style.width = '100%';
  };

  if (isIE11) {
    stickFooter();
    window.addEventListener('resize', stickFooter);
  }
})();

// try {
//   var isIE11 = !!window.MSInputMethodContext && !!document.documentMode;
//   if (isIE11) {

//     var checkoutLabel = document.querySelectorAll('.checkout-form__box label');
//     for (var i = 0; i < checkoutLabel.length; i++) {
//       checkoutLabel[i].style.display = 'none';
//     }

//     document.querySelector('.angle').style.display = 'none';
//   }

// } catch (err) {}

// брейкпоиты разрешения экрана
var sizeXl = 1200,
  sizeLg = 992,
  sizeMd = 768,
  sizeSm = 576;

// высота скролла при которой появляется меню на главной странице
var scroll = 80;


// по скроллу задает главному меню position: fixed
$(document).scroll(function () {
  if ($(document).scrollTop() >= scroll && $(window).width() > sizeMd) {
    $('.js-header').addClass('header_medium');
  } else if ($(document).scrollTop() < scroll) {
    $('.js-header').removeClass('header_medium');
  }
});

// убирает класс из js-lang-header при разрешении меньше sizeMd
$(window).resize(function () {
  removeThemeLang();
});

removeThemeLang();

function removeThemeLang() {
  if ($('.js-lang-header') && $(window).outerWidth() <= sizeMd) {
    $('.js-lang-header').removeClass('header_theme_lang');
  } else {
    $('.js-lang-header').addClass('header_theme_lang');
  }
}


// скрывает и показывает элементы при нажатии на кнопку поиск
$(window).resize(function () {
  if ($(window).width() <= sizeMd) {
    $('.js-header-logo').removeClass('hidden');
    $('.js-nav-box').removeClass('hidden');
    $('.header-search-btn').removeClass('hidden');
    $('.js-header-form-box').removeClass('visible-flex');
    $('.hamburger').removeClass('hidden');
  };
});

$('.header-search-btn').click(function () {
  $('.js-header-logo').addClass('hidden');
  // $('.js-nav-box').addClass('hidden');

  if ($(window).width() > sizeMd) {
    $('.header-search-btn').addClass('hidden');
    $('.js-header-form-box').addClass('visible-flex');
    $('.js-nav-box').addClass('hidden');
    $('.js-header-form__input').focus();
  };

  if ($(window).width() <= sizeMd && ($('.hamburger').css('display') == 'block')) {
    $('.hamburger').addClass('hidden');
    $('.js-header-form-box').addClass('visible-flex');
    $('.js-header-form__input').focus();
  } else if ($(window).width() <= sizeMd) {
    $('.hamburger').removeClass('hidden');
    $('.js-header-logo').removeClass('hidden');
    $('.js-header-form-box').removeClass('visible-flex');
  };

});


// закрывает форму на десктопе
$('.header-form-box__btn-close').click(function () {
  $('.js-header-logo').removeClass('hidden');
  $('.js-nav-box').removeClass('hidden');
  $('.js-header-form-box').removeClass('visible-flex');
  $('.header-search-btn').removeClass('hidden');
});


// гамбургер меню
$(window).resize(function () {
  $('.overlay').removeClass('overlay_active');
  $('.nav-box').removeClass('nav-box_mobile-active');
  $('body').css('overflow-y', 'scroll');
});

$('.hamburger').click(function () {
  $('.overlay').addClass('overlay_active');
  $('.nav-box').addClass('nav-box_mobile-active');
  $('body').css('overflow-y', 'hidden');
});

$('.nav-box__mobile-hamburger').click(function () {
  $('.overlay').removeClass('overlay_active');
  $('.nav-box').removeClass('nav-box_mobile-active');
  $('body').css('overflow-y', 'scroll');
});

$('.overlay').click(function () {
  $('.overlay').removeClass('overlay_active');
  $('.nav-box').removeClass('nav-box_mobile-active');
  $('body').css('overflow-y', 'scroll');
});


// центрирует второстепенное меню в зависимости от колличества пунктов
var menuItem = $('.header-menu__item');

switch (menuItem.length) {
  case 6:
    $('.header-menu').addClass('header-menu_item_6');
    break;
  case 5:
    $('.header-menu').addClass('header-menu_item_5');
    break;
  case 4:
    $('.header-menu').addClass('header-menu_item_4');
    break;
  case 3:
    $('.header-menu').addClass('header-menu_item_3');
    break;
}


// настройка высоты первого высокого блока
$(window).resize(function () {
  langHight();
});


setTimeout(function () {
  langHight();
}, 200);

function langHight() {
  var languageItemHeight = Math.floor($('.language__item:nth-child(2)').outerHeight());
  var languageItemMarginBottom = $('.language__item:nth-child(2)').css('margin-bottom');
  var languageHeight = parseFloat(languageItemHeight) * 2 + parseFloat(languageItemMarginBottom);
  $('.language__item_height').css('height', languageHeight + 'px');
};


// popup
$('.banner-content__btn').click(function () {
  $('.popup-overlay').fadeToggle(200);
  $('body').css('overflow', 'hidden');
});

$('.popup__btn').click(function () {
  $('.popup-overlay').fadeToggle(200);
  $('body').css('overflow', 'visible');
});


// mini-course-popup__close (на продакшене настройки появления попапа перененсены в инлайн)
// так как из-за плагина не срабатывал клик
$('.mini-course__info').click(function () {
  $('.mini-course-popup-overlay').fadeIn(200);
});

// $('.mini-course-popup-overlay').click(function() {
//   $('.mini-course-popup-overlay').fadeOut(200);
// });

$('.mini-course-popup__close').click(function () {
  $('.mini-course-popup-overlay').fadeOut(200);
});

$('.mini-course-popup__btn').click(function () {
  $('.mini-course-popup-overlay').fadeOut(200);
});


// кнопка наверх
$('.js-footer-top__btn').click(function () {
  $('body,html').animate({
    scrollTop: '0'
  }, 600);
});

//slick
$('.blog-list').slick({
  slidesToShow: 4,
  accessibility: false,
  slidesToScroll: 1,
  autoplay: true,
  autoplaySpeed: 2000,
  infinite: true,
  arrows: false,
  // centerPadding: '30px',
  responsive: [{
      breakpoint: 992,
      settings: {
        centerMode: true,
        slidesToShow: 3
      }
    },
    {
      breakpoint: 768,
      settings: {
        centerMode: true,
        slidesToShow: 2
      }
    },
    {
      breakpoint: 576,
      settings: {
        centerMode: true,
        slidesToShow: 1
      }
    }
  ]
});


$('.pp-carousel__list').slick({
  centerMode: true,
  focusOnSelect: true,
  accessibility: false,
  // edgeFriction: '0',
  // centerPadding: '120px',
  slidesToShow: 7,
  infinite: true,
  speed: 300,
  // autoplay: true,
  autoplaySpeed: 2000,
  prevArrow: '<button class="gallery__list-arrow gallery__list-arrow_prev" type="button"><svg><use xlink:href="/themes/demo/assets/images/sprite/svg/symbol/sprite.svg#arrow-pointing-down"></svg></button>',
  nextArrow: '<button class="gallery__list-arrow gallery__list-arrow_next" type="button"><svg><use xlink:href="/themes/demo/assets/images/sprite/svg/symbol/sprite.svg#arrow-pointing-down"></svg</button>',
  responsive: [{
      breakpoint: 1150,
      settings: {
        slidesToShow: 5
      }
    },
    {
      breakpoint: 800,
      settings: {
        slidesToShow: 3
      }
    },
    {
      breakpoint: 576,
      settings: {
        centerPadding: '160px',
        slidesToShow: 1
      }
    },
    {
      breakpoint: 500,
      settings: {
        centerPadding: '140px',
        slidesToShow: 1
      }
    },
    {
      breakpoint: 450,
      settings: {
        centerPadding: '110px',
        slidesToShow: 1
      }
    },
    {
      breakpoint: 400,
      settings: {
        centerPadding: '70px',
        slidesToShow: 1
      }
    },
    {
      breakpoint: 350,
      settings: {
        centerPadding: '50px',
        slidesToShow: 1
      }
    }
  ]
});

$(".pp-carousel__list").on("init", function (event, slick) {
  if (slick.currentSlide + 1 < 10) {
    $(".gallery__current-item").text('0' + parseInt(slick.currentSlide + 1));
  } else {
    $(".gallery__current-item").text(parseInt(slick.currentSlide + 1));
  };
  if (slick.slideCount < 10) {
    $(".gallery__all-items").text('0' + parseInt(slick.slideCount));
  } else {
    $(".gallery__all-items").text(parseInt(slick.slideCount));
  };
});

$(".pp-carousel__list").on("afterChange", function (event, slick, currentSlide) {
  if (slick.currentSlide + 1 < 10) {
    $(".gallery__current-item").text('0' + parseInt(slick.currentSlide + 1));
  } else {
    $(".gallery__current-item").text(parseInt(slick.currentSlide + 1));
  };
  if (slick.slideCount < 10) {
    $(".gallery__all-items").text('0' + parseInt(slick.slideCount));
  } else {
    $(".gallery__all-items").text(parseInt(slick.slideCount));
  };
});



// таблицы

// наложение тени на фиксированную колонку таблицы
$(".table3").clone(true).appendTo('#table3-box').addClass('table-clone');


try {
  var div = document.getElementById('table3-wrap');

  tableScroll();

  $(window).resize(function () {
    tableScroll();
  });
} catch (err) {}

function tableScroll() {

  if (div.scrollWidth > div.clientWidth) {
    $('.table-clone td:first-child').addClass('fixed-td_active');
  } else {
    $('.table-clone td:first-child').removeClass('fixed-td_active');
  };
};


// flipping
(function () {
  var initFlipping = function (blockClass, headerClass, footerClass) {
    var angle = document.querySelector(blockClass);
    var flag = document.querySelector('.angle__flag');
    var header = document.querySelector(headerClass);
    var footer = document.querySelector(footerClass);

    var onAngleMousedown = function (evt) {
      evt.preventDefault();
      var maxSize = {};
      var footClientRect = footer.getBoundingClientRect();
      var footSize = Math.round(footClientRect.top);
      maxSize.height = innerHeight - (header.offsetHeight + 68 + (innerHeight - footSize));
      flag.style.height = maxSize.height + 'px';
      maxSize.width = flag.offsetWidth;

      var startCoordinate = {
        x: evt.clientX,
        y: evt.clientY
      };

      var onAngleMousemove = function (moveEvt) {
        moveEvt.preventDefault();

        var shift = {
          x: startCoordinate.x - moveEvt.clientX,
          y: startCoordinate.y - moveEvt.clientY,
        };

        startCoordinate = {
          x: moveEvt.clientX,
          y: moveEvt.clientY
        };

        var scaleBlock = {
          width: angle.offsetWidth + shift.x,
          height: angle.offsetHeight + shift.y
        }

        if (scaleBlock.width <= maxSize.width && scaleBlock.width > 100) {
          angle.style.width = scaleBlock.width + 'px';
        }

        if (scaleBlock.height <= maxSize.height && scaleBlock.height > 100) {
          angle.style.height = scaleBlock.height + 'px';
        }
      };

      var onAngleMouseup = function (upEvt) {
        upEvt.preventDefault();
        document.removeEventListener('mousemove', onAngleMousemove);
        document.removeEventListener('mouseup', onAngleMouseup);
        angle.style.width = '';
        angle.style.height = '';
      };

      document.addEventListener('mousemove', onAngleMousemove);
      document.addEventListener('mouseup', onAngleMouseup);
    };

    if (angle) {
      angle.addEventListener('mousedown', onAngleMousedown);
    }
  };

  initFlipping('.angle', 'header', 'footer');
})();


// selectric стилизация select

$('.checkout-form__select').selectric();
$('.checkout-form__select2').selectric();
$('.mblog-categ-select').selectric();

$(".checkout-form__select").change(function () {
  if ($(".checkout-form__select").val() != '') {
    $('.selectric-checkout-form__select.selectric-below .label').css({
      'color': '#173857',
      'font-size': '14px'
    });
  }
});

$(".checkout-form__select2").change(function () {
  if ($(".checkout-form__select2").val() != '') {
    $('.selectric-checkout-form__select2.selectric-below .label').css({
      'color': '#173857',
      'font-size': '14px'
    });
  }
});


// валидация форм
var productCheckoutForm = document.querySelector('#product-checkout-form');

try {
  productCheckoutForm.addEventListener('submit', function (e) {
    var nameCard = document.querySelector('#name-card'),
      stateProvince = document.querySelector('#state-province'),
      address = document.querySelector('#address'),
      city = document.querySelector('#city'),
      zipCode = document.querySelector('#zip-code'),
      eMail = document.querySelector('#e-mail'),
      cardNumber = document.querySelector('#card-number'),
      securityCode = document.querySelector('#security-code'),
      expirationDate = document.querySelector('#expiration-date'),
      country = document.querySelector('#country'),
      cardType = document.querySelector('#card-type');

    var productCheckoutFormFields = [
      nameCard,
      stateProvince,
      address,
      city,
      zipCode,
      eMail,
      cardNumber,
      securityCode,
      expirationDate
    ];

    var productCheckoutFormSelect = [
      country,
      cardType
    ];

    for (var i = 0; i < productCheckoutFormFields.length; i++) {
      if (!productCheckoutFormFields[i].value) {
        e.preventDefault();
        productCheckoutFormFields[i].classList.add('error');
        productCheckoutFormFields[i].addEventListener('input', function (event) {
          event.target.classList.remove('error');
        })
      }
    };

    for (var y = 0; y < productCheckoutFormSelect.length; y++) {
      if (productCheckoutFormSelect[y].value == '') {
        e.preventDefault();

        var checkoutFormSelectClass = '.' + productCheckoutFormSelect[y].parentNode.parentNode.parentNode.classList[0];
        var selectric = document.querySelector(checkoutFormSelectClass + " " + ".selectric");

        selectric.classList.add('error');
        productCheckoutFormSelect[y].addEventListener('change', function () {
          productCheckoutFormSelect[y].classList.remove('error');
        })
      }
    };
  });
} catch (err) {}




var productCheckoutForm1 = document.querySelector('#product-checkout-form1');

try {
  productCheckoutForm1.addEventListener('submit', function (e) {
    var name1 = document.querySelector('#name1'),
      eMail1 = document.querySelector('#e-mail1'),
      message1 = document.querySelector('#message1');

    var productCheckoutFormFields = [
      name1,
      eMail1,
      message1
    ];

    for (var i = 0; i < productCheckoutFormFields.length; i++) {
      if (!productCheckoutFormFields[i].value) {
        e.preventDefault();
        productCheckoutFormFields[i].classList.add('error');
        productCheckoutFormFields[i].addEventListener('input', function (event) {
          event.target.classList.remove('error');
        })
      }
    };
  });
} catch (err) {}


var productCheckoutForm2 = document.querySelector('#product-checkout-form2');

try {
  productCheckoutForm2.addEventListener('submit', function (e) {
    var name1 = document.querySelector('#name2'),
      eMail1 = document.querySelector('#e-mail2'),
      message1 = document.querySelector('#message2');

    var productCheckoutFormFields = [
      name1,
      eMail1,
      message1
    ];

    for (var i = 0; i < productCheckoutFormFields.length; i++) {
      if (!productCheckoutFormFields[i].value) {
        e.preventDefault();
        productCheckoutFormFields[i].classList.add('error');
        productCheckoutFormFields[i].addEventListener('input', function (event) {
          event.target.classList.remove('error');
        })
      }
    };
  });
} catch (err) {}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJzdmc0ZXZlcnlib2R5KCk7XHJcblxyXG4oZnVuY3Rpb24gKCkge1xyXG4gIHZhciBpc0lFMTEgPSAhIXdpbmRvdy5NU0lucHV0TWV0aG9kQ29udGV4dCAmJiAhIWRvY3VtZW50LmRvY3VtZW50TW9kZTtcclxuXHJcbiAgdmFyIHN0aWNrRm9vdGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIEZPT1RFUiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvb3RlcicpO1xyXG4gICAgdmFyIE1BSU4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJyk7XHJcbiAgICB2YXIgQk9EWSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcclxuICAgIHZhciBmb290ZXJIZWlnaHQgPSBGT09URVIub2Zmc2V0SGVpZ2h0O1xyXG4gICAgQk9EWS5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XHJcbiAgICBNQUlOLnN0eWxlLm1hcmdpbkJvdHRvbSA9IGZvb3RlckhlaWdodCArICdweCc7XHJcbiAgICBGT09URVIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG4gICAgRk9PVEVSLnN0eWxlLmJvdHRvbSA9ICcwJztcclxuICAgIEZPT1RFUi5zdHlsZS5sZWZ0ID0gJzAnO1xyXG4gICAgRk9PVEVSLnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4gIH07XHJcblxyXG4gIGlmIChpc0lFMTEpIHtcclxuICAgIHN0aWNrRm9vdGVyKCk7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgc3RpY2tGb290ZXIpO1xyXG4gIH1cclxufSkoKTtcclxuXHJcbi8vIHRyeSB7XHJcbi8vICAgdmFyIGlzSUUxMSA9ICEhd2luZG93Lk1TSW5wdXRNZXRob2RDb250ZXh0ICYmICEhZG9jdW1lbnQuZG9jdW1lbnRNb2RlO1xyXG4vLyAgIGlmIChpc0lFMTEpIHtcclxuXHJcbi8vICAgICB2YXIgY2hlY2tvdXRMYWJlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaGVja291dC1mb3JtX19ib3ggbGFiZWwnKTtcclxuLy8gICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hlY2tvdXRMYWJlbC5sZW5ndGg7IGkrKykge1xyXG4vLyAgICAgICBjaGVja291dExhYmVsW2ldLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFuZ2xlJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuLy8gICB9XHJcblxyXG4vLyB9IGNhdGNoIChlcnIpIHt9XHJcblxyXG4vLyDQsdGA0LXQudC60L/QvtC40YLRiyDRgNCw0LfRgNC10YjQtdC90LjRjyDRjdC60YDQsNC90LBcclxudmFyIHNpemVYbCA9IDEyMDAsXHJcbiAgc2l6ZUxnID0gOTkyLFxyXG4gIHNpemVNZCA9IDc2OCxcclxuICBzaXplU20gPSA1NzY7XHJcblxyXG4vLyDQstGL0YHQvtGC0LAg0YHQutGA0L7Qu9C70LAg0L/RgNC4INC60L7RgtC+0YDQvtC5INC/0L7Rj9Cy0LvRj9C10YLRgdGPINC80LXQvdGOINC90LAg0LPQu9Cw0LLQvdC+0Lkg0YHRgtGA0LDQvdC40YbQtVxyXG52YXIgc2Nyb2xsID0gODA7XHJcblxyXG5cclxuLy8g0L/QviDRgdC60YDQvtC70LvRgyDQt9Cw0LTQsNC10YIg0LPQu9Cw0LLQvdC+0LzRgyDQvNC10L3RjiBwb3NpdGlvbjogZml4ZWRcclxuJChkb2N1bWVudCkuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcclxuICBpZiAoJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkgPj0gc2Nyb2xsICYmICQod2luZG93KS53aWR0aCgpID4gc2l6ZU1kKSB7XHJcbiAgICAkKCcuanMtaGVhZGVyJykuYWRkQ2xhc3MoJ2hlYWRlcl9tZWRpdW0nKTtcclxuICB9IGVsc2UgaWYgKCQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpIDwgc2Nyb2xsKSB7XHJcbiAgICAkKCcuanMtaGVhZGVyJykucmVtb3ZlQ2xhc3MoJ2hlYWRlcl9tZWRpdW0nKTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8g0YPQsdC40YDQsNC10YIg0LrQu9Cw0YHRgSDQuNC3IGpzLWxhbmctaGVhZGVyINC/0YDQuCDRgNCw0LfRgNC10YjQtdC90LjQuCDQvNC10L3RjNGI0LUgc2l6ZU1kXHJcbiQod2luZG93KS5yZXNpemUoZnVuY3Rpb24gKCkge1xyXG4gIHJlbW92ZVRoZW1lTGFuZygpO1xyXG59KTtcclxuXHJcbnJlbW92ZVRoZW1lTGFuZygpO1xyXG5cclxuZnVuY3Rpb24gcmVtb3ZlVGhlbWVMYW5nKCkge1xyXG4gIGlmICgkKCcuanMtbGFuZy1oZWFkZXInKSAmJiAkKHdpbmRvdykub3V0ZXJXaWR0aCgpIDw9IHNpemVNZCkge1xyXG4gICAgJCgnLmpzLWxhbmctaGVhZGVyJykucmVtb3ZlQ2xhc3MoJ2hlYWRlcl90aGVtZV9sYW5nJyk7XHJcbiAgfSBlbHNlIHtcclxuICAgICQoJy5qcy1sYW5nLWhlYWRlcicpLmFkZENsYXNzKCdoZWFkZXJfdGhlbWVfbGFuZycpO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbi8vINGB0LrRgNGL0LLQsNC10YIg0Lgg0L/QvtC60LDQt9GL0LLQsNC10YIg0Y3Qu9C10LzQtdC90YLRiyDQv9GA0Lgg0L3QsNC20LDRgtC40Lgg0L3QsCDQutC90L7Qv9C60YMg0L/QvtC40YHQulxyXG4kKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uICgpIHtcclxuICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gc2l6ZU1kKSB7XHJcbiAgICAkKCcuanMtaGVhZGVyLWxvZ28nKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAkKCcuanMtbmF2LWJveCcpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuICAgICQoJy5oZWFkZXItc2VhcmNoLWJ0bicpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuICAgICQoJy5qcy1oZWFkZXItZm9ybS1ib3gnKS5yZW1vdmVDbGFzcygndmlzaWJsZS1mbGV4Jyk7XHJcbiAgICAkKCcuaGFtYnVyZ2VyJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xyXG4gIH07XHJcbn0pO1xyXG5cclxuJCgnLmhlYWRlci1zZWFyY2gtYnRuJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICQoJy5qcy1oZWFkZXItbG9nbycpLmFkZENsYXNzKCdoaWRkZW4nKTtcclxuICAvLyAkKCcuanMtbmF2LWJveCcpLmFkZENsYXNzKCdoaWRkZW4nKTtcclxuXHJcbiAgaWYgKCQod2luZG93KS53aWR0aCgpID4gc2l6ZU1kKSB7XHJcbiAgICAkKCcuaGVhZGVyLXNlYXJjaC1idG4nKS5hZGRDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAkKCcuanMtaGVhZGVyLWZvcm0tYm94JykuYWRkQ2xhc3MoJ3Zpc2libGUtZmxleCcpO1xyXG4gICAgJCgnLmpzLW5hdi1ib3gnKS5hZGRDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAkKCcuanMtaGVhZGVyLWZvcm1fX2lucHV0JykuZm9jdXMoKTtcclxuICB9O1xyXG5cclxuICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gc2l6ZU1kICYmICgkKCcuaGFtYnVyZ2VyJykuY3NzKCdkaXNwbGF5JykgPT0gJ2Jsb2NrJykpIHtcclxuICAgICQoJy5oYW1idXJnZXInKS5hZGRDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAkKCcuanMtaGVhZGVyLWZvcm0tYm94JykuYWRkQ2xhc3MoJ3Zpc2libGUtZmxleCcpO1xyXG4gICAgJCgnLmpzLWhlYWRlci1mb3JtX19pbnB1dCcpLmZvY3VzKCk7XHJcbiAgfSBlbHNlIGlmICgkKHdpbmRvdykud2lkdGgoKSA8PSBzaXplTWQpIHtcclxuICAgICQoJy5oYW1idXJnZXInKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAkKCcuanMtaGVhZGVyLWxvZ28nKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAkKCcuanMtaGVhZGVyLWZvcm0tYm94JykucmVtb3ZlQ2xhc3MoJ3Zpc2libGUtZmxleCcpO1xyXG4gIH07XHJcblxyXG59KTtcclxuXHJcblxyXG4vLyDQt9Cw0LrRgNGL0LLQsNC10YIg0YTQvtGA0LzRgyDQvdCwINC00LXRgdC60YLQvtC/0LVcclxuJCgnLmhlYWRlci1mb3JtLWJveF9fYnRuLWNsb3NlJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICQoJy5qcy1oZWFkZXItbG9nbycpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuICAkKCcuanMtbmF2LWJveCcpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuICAkKCcuanMtaGVhZGVyLWZvcm0tYm94JykucmVtb3ZlQ2xhc3MoJ3Zpc2libGUtZmxleCcpO1xyXG4gICQoJy5oZWFkZXItc2VhcmNoLWJ0bicpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxufSk7XHJcblxyXG5cclxuLy8g0LPQsNC80LHRg9GA0LPQtdGAINC80LXQvdGOXHJcbiQod2luZG93KS5yZXNpemUoZnVuY3Rpb24gKCkge1xyXG4gICQoJy5vdmVybGF5JykucmVtb3ZlQ2xhc3MoJ292ZXJsYXlfYWN0aXZlJyk7XHJcbiAgJCgnLm5hdi1ib3gnKS5yZW1vdmVDbGFzcygnbmF2LWJveF9tb2JpbGUtYWN0aXZlJyk7XHJcbiAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cteScsICdzY3JvbGwnKTtcclxufSk7XHJcblxyXG4kKCcuaGFtYnVyZ2VyJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICQoJy5vdmVybGF5JykuYWRkQ2xhc3MoJ292ZXJsYXlfYWN0aXZlJyk7XHJcbiAgJCgnLm5hdi1ib3gnKS5hZGRDbGFzcygnbmF2LWJveF9tb2JpbGUtYWN0aXZlJyk7XHJcbiAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cteScsICdoaWRkZW4nKTtcclxufSk7XHJcblxyXG4kKCcubmF2LWJveF9fbW9iaWxlLWhhbWJ1cmdlcicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAkKCcub3ZlcmxheScpLnJlbW92ZUNsYXNzKCdvdmVybGF5X2FjdGl2ZScpO1xyXG4gICQoJy5uYXYtYm94JykucmVtb3ZlQ2xhc3MoJ25hdi1ib3hfbW9iaWxlLWFjdGl2ZScpO1xyXG4gICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93LXknLCAnc2Nyb2xsJyk7XHJcbn0pO1xyXG5cclxuJCgnLm92ZXJsYXknKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgJCgnLm92ZXJsYXknKS5yZW1vdmVDbGFzcygnb3ZlcmxheV9hY3RpdmUnKTtcclxuICAkKCcubmF2LWJveCcpLnJlbW92ZUNsYXNzKCduYXYtYm94X21vYmlsZS1hY3RpdmUnKTtcclxuICAkKCdib2R5JykuY3NzKCdvdmVyZmxvdy15JywgJ3Njcm9sbCcpO1xyXG59KTtcclxuXHJcblxyXG4vLyDRhtC10L3RgtGA0LjRgNGD0LXRgiDQstGC0L7RgNC+0YHRgtC10L/QtdC90L3QvtC1INC80LXQvdGOINCyINC30LDQstC40YHQuNC80L7RgdGC0Lgg0L7RgiDQutC+0LvQu9C40YfQtdGB0YLQstCwINC/0YPQvdC60YLQvtCyXHJcbnZhciBtZW51SXRlbSA9ICQoJy5oZWFkZXItbWVudV9faXRlbScpO1xyXG5cclxuc3dpdGNoIChtZW51SXRlbS5sZW5ndGgpIHtcclxuICBjYXNlIDY6XHJcbiAgICAkKCcuaGVhZGVyLW1lbnUnKS5hZGRDbGFzcygnaGVhZGVyLW1lbnVfaXRlbV82Jyk7XHJcbiAgICBicmVhaztcclxuICBjYXNlIDU6XHJcbiAgICAkKCcuaGVhZGVyLW1lbnUnKS5hZGRDbGFzcygnaGVhZGVyLW1lbnVfaXRlbV81Jyk7XHJcbiAgICBicmVhaztcclxuICBjYXNlIDQ6XHJcbiAgICAkKCcuaGVhZGVyLW1lbnUnKS5hZGRDbGFzcygnaGVhZGVyLW1lbnVfaXRlbV80Jyk7XHJcbiAgICBicmVhaztcclxuICBjYXNlIDM6XHJcbiAgICAkKCcuaGVhZGVyLW1lbnUnKS5hZGRDbGFzcygnaGVhZGVyLW1lbnVfaXRlbV8zJyk7XHJcbiAgICBicmVhaztcclxufVxyXG5cclxuXHJcbi8vINC90LDRgdGC0YDQvtC50LrQsCDQstGL0YHQvtGC0Ysg0L/QtdGA0LLQvtCz0L4g0LLRi9GB0L7QutC+0LPQviDQsdC70L7QutCwXHJcbiQod2luZG93KS5yZXNpemUoZnVuY3Rpb24gKCkge1xyXG4gIGxhbmdIaWdodCgpO1xyXG59KTtcclxuXHJcblxyXG5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICBsYW5nSGlnaHQoKTtcclxufSwgMjAwKTtcclxuXHJcbmZ1bmN0aW9uIGxhbmdIaWdodCgpIHtcclxuICB2YXIgbGFuZ3VhZ2VJdGVtSGVpZ2h0ID0gTWF0aC5mbG9vcigkKCcubGFuZ3VhZ2VfX2l0ZW06bnRoLWNoaWxkKDIpJykub3V0ZXJIZWlnaHQoKSk7XHJcbiAgdmFyIGxhbmd1YWdlSXRlbU1hcmdpbkJvdHRvbSA9ICQoJy5sYW5ndWFnZV9faXRlbTpudGgtY2hpbGQoMiknKS5jc3MoJ21hcmdpbi1ib3R0b20nKTtcclxuICB2YXIgbGFuZ3VhZ2VIZWlnaHQgPSBwYXJzZUZsb2F0KGxhbmd1YWdlSXRlbUhlaWdodCkgKiAyICsgcGFyc2VGbG9hdChsYW5ndWFnZUl0ZW1NYXJnaW5Cb3R0b20pO1xyXG4gICQoJy5sYW5ndWFnZV9faXRlbV9oZWlnaHQnKS5jc3MoJ2hlaWdodCcsIGxhbmd1YWdlSGVpZ2h0ICsgJ3B4Jyk7XHJcbn07XHJcblxyXG5cclxuLy8gcG9wdXBcclxuJCgnLmJhbm5lci1jb250ZW50X19idG4nKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgJCgnLnBvcHVwLW92ZXJsYXknKS5mYWRlVG9nZ2xlKDIwMCk7XHJcbiAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCAnaGlkZGVuJyk7XHJcbn0pO1xyXG5cclxuJCgnLnBvcHVwX19idG4nKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgJCgnLnBvcHVwLW92ZXJsYXknKS5mYWRlVG9nZ2xlKDIwMCk7XHJcbiAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCAndmlzaWJsZScpO1xyXG59KTtcclxuXHJcblxyXG4vLyBtaW5pLWNvdXJzZS1wb3B1cF9fY2xvc2UgKNC90LAg0L/RgNC+0LTQsNC60YjQtdC90LUg0L3QsNGB0YLRgNC+0LnQutC4INC/0L7Rj9Cy0LvQtdC90LjRjyDQv9C+0L/QsNC/0LAg0L/QtdGA0LXQvdC10L3RgdC10L3RiyDQsiDQuNC90LvQsNC50L0pXHJcbi8vINGC0LDQuiDQutCw0Log0LjQty3Qt9CwINC/0LvQsNCz0LjQvdCwINC90LUg0YHRgNCw0LHQsNGC0YvQstCw0Lsg0LrQu9C40LpcclxuJCgnLm1pbmktY291cnNlX19pbmZvJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICQoJy5taW5pLWNvdXJzZS1wb3B1cC1vdmVybGF5JykuZmFkZUluKDIwMCk7XHJcbn0pO1xyXG5cclxuLy8gJCgnLm1pbmktY291cnNlLXBvcHVwLW92ZXJsYXknKS5jbGljayhmdW5jdGlvbigpIHtcclxuLy8gICAkKCcubWluaS1jb3Vyc2UtcG9wdXAtb3ZlcmxheScpLmZhZGVPdXQoMjAwKTtcclxuLy8gfSk7XHJcblxyXG4kKCcubWluaS1jb3Vyc2UtcG9wdXBfX2Nsb3NlJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICQoJy5taW5pLWNvdXJzZS1wb3B1cC1vdmVybGF5JykuZmFkZU91dCgyMDApO1xyXG59KTtcclxuXHJcbiQoJy5taW5pLWNvdXJzZS1wb3B1cF9fYnRuJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICQoJy5taW5pLWNvdXJzZS1wb3B1cC1vdmVybGF5JykuZmFkZU91dCgyMDApO1xyXG59KTtcclxuXHJcblxyXG4vLyDQutC90L7Qv9C60LAg0L3QsNCy0LXRgNGFXHJcbiQoJy5qcy1mb290ZXItdG9wX19idG4nKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgJCgnYm9keSxodG1sJykuYW5pbWF0ZSh7XHJcbiAgICBzY3JvbGxUb3A6ICcwJ1xyXG4gIH0sIDYwMCk7XHJcbn0pO1xyXG5cclxuLy9zbGlja1xyXG4kKCcuYmxvZy1saXN0Jykuc2xpY2soe1xyXG4gIHNsaWRlc1RvU2hvdzogNCxcclxuICBhY2Nlc3NpYmlsaXR5OiBmYWxzZSxcclxuICBzbGlkZXNUb1Njcm9sbDogMSxcclxuICBhdXRvcGxheTogdHJ1ZSxcclxuICBhdXRvcGxheVNwZWVkOiAyMDAwLFxyXG4gIGluZmluaXRlOiB0cnVlLFxyXG4gIGFycm93czogZmFsc2UsXHJcbiAgLy8gY2VudGVyUGFkZGluZzogJzMwcHgnLFxyXG4gIHJlc3BvbnNpdmU6IFt7XHJcbiAgICAgIGJyZWFrcG9pbnQ6IDk5MixcclxuICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICBjZW50ZXJNb2RlOiB0cnVlLFxyXG4gICAgICAgIHNsaWRlc1RvU2hvdzogM1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBicmVha3BvaW50OiA3NjgsXHJcbiAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgY2VudGVyTW9kZTogdHJ1ZSxcclxuICAgICAgICBzbGlkZXNUb1Nob3c6IDJcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgYnJlYWtwb2ludDogNTc2LFxyXG4gICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgIGNlbnRlck1vZGU6IHRydWUsXHJcbiAgICAgICAgc2xpZGVzVG9TaG93OiAxXHJcbiAgICAgIH1cclxuICAgIH1cclxuICBdXHJcbn0pO1xyXG5cclxuXHJcbiQoJy5wcC1jYXJvdXNlbF9fbGlzdCcpLnNsaWNrKHtcclxuICBjZW50ZXJNb2RlOiB0cnVlLFxyXG4gIGZvY3VzT25TZWxlY3Q6IHRydWUsXHJcbiAgYWNjZXNzaWJpbGl0eTogZmFsc2UsXHJcbiAgLy8gZWRnZUZyaWN0aW9uOiAnMCcsXHJcbiAgLy8gY2VudGVyUGFkZGluZzogJzEyMHB4JyxcclxuICBzbGlkZXNUb1Nob3c6IDcsXHJcbiAgaW5maW5pdGU6IHRydWUsXHJcbiAgc3BlZWQ6IDMwMCxcclxuICAvLyBhdXRvcGxheTogdHJ1ZSxcclxuICBhdXRvcGxheVNwZWVkOiAyMDAwLFxyXG4gIHByZXZBcnJvdzogJzxidXR0b24gY2xhc3M9XCJnYWxsZXJ5X19saXN0LWFycm93IGdhbGxlcnlfX2xpc3QtYXJyb3dfcHJldlwiIHR5cGU9XCJidXR0b25cIj48c3ZnPjx1c2UgeGxpbms6aHJlZj1cIi90aGVtZXMvZGVtby9hc3NldHMvaW1hZ2VzL3Nwcml0ZS9zdmcvc3ltYm9sL3Nwcml0ZS5zdmcjYXJyb3ctcG9pbnRpbmctZG93blwiPjwvc3ZnPjwvYnV0dG9uPicsXHJcbiAgbmV4dEFycm93OiAnPGJ1dHRvbiBjbGFzcz1cImdhbGxlcnlfX2xpc3QtYXJyb3cgZ2FsbGVyeV9fbGlzdC1hcnJvd19uZXh0XCIgdHlwZT1cImJ1dHRvblwiPjxzdmc+PHVzZSB4bGluazpocmVmPVwiL3RoZW1lcy9kZW1vL2Fzc2V0cy9pbWFnZXMvc3ByaXRlL3N2Zy9zeW1ib2wvc3ByaXRlLnN2ZyNhcnJvdy1wb2ludGluZy1kb3duXCI+PC9zdmc8L2J1dHRvbj4nLFxyXG4gIHJlc3BvbnNpdmU6IFt7XHJcbiAgICAgIGJyZWFrcG9pbnQ6IDExNTAsXHJcbiAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgc2xpZGVzVG9TaG93OiA1XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIGJyZWFrcG9pbnQ6IDgwMCxcclxuICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICBzbGlkZXNUb1Nob3c6IDNcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgYnJlYWtwb2ludDogNTc2LFxyXG4gICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgIGNlbnRlclBhZGRpbmc6ICcxNjBweCcsXHJcbiAgICAgICAgc2xpZGVzVG9TaG93OiAxXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIGJyZWFrcG9pbnQ6IDUwMCxcclxuICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICBjZW50ZXJQYWRkaW5nOiAnMTQwcHgnLFxyXG4gICAgICAgIHNsaWRlc1RvU2hvdzogMVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBicmVha3BvaW50OiA0NTAsXHJcbiAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgY2VudGVyUGFkZGluZzogJzExMHB4JyxcclxuICAgICAgICBzbGlkZXNUb1Nob3c6IDFcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgYnJlYWtwb2ludDogNDAwLFxyXG4gICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgIGNlbnRlclBhZGRpbmc6ICc3MHB4JyxcclxuICAgICAgICBzbGlkZXNUb1Nob3c6IDFcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgYnJlYWtwb2ludDogMzUwLFxyXG4gICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgIGNlbnRlclBhZGRpbmc6ICc1MHB4JyxcclxuICAgICAgICBzbGlkZXNUb1Nob3c6IDFcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIF1cclxufSk7XHJcblxyXG4kKFwiLnBwLWNhcm91c2VsX19saXN0XCIpLm9uKFwiaW5pdFwiLCBmdW5jdGlvbiAoZXZlbnQsIHNsaWNrKSB7XHJcbiAgaWYgKHNsaWNrLmN1cnJlbnRTbGlkZSArIDEgPCAxMCkge1xyXG4gICAgJChcIi5nYWxsZXJ5X19jdXJyZW50LWl0ZW1cIikudGV4dCgnMCcgKyBwYXJzZUludChzbGljay5jdXJyZW50U2xpZGUgKyAxKSk7XHJcbiAgfSBlbHNlIHtcclxuICAgICQoXCIuZ2FsbGVyeV9fY3VycmVudC1pdGVtXCIpLnRleHQocGFyc2VJbnQoc2xpY2suY3VycmVudFNsaWRlICsgMSkpO1xyXG4gIH07XHJcbiAgaWYgKHNsaWNrLnNsaWRlQ291bnQgPCAxMCkge1xyXG4gICAgJChcIi5nYWxsZXJ5X19hbGwtaXRlbXNcIikudGV4dCgnMCcgKyBwYXJzZUludChzbGljay5zbGlkZUNvdW50KSk7XHJcbiAgfSBlbHNlIHtcclxuICAgICQoXCIuZ2FsbGVyeV9fYWxsLWl0ZW1zXCIpLnRleHQocGFyc2VJbnQoc2xpY2suc2xpZGVDb3VudCkpO1xyXG4gIH07XHJcbn0pO1xyXG5cclxuJChcIi5wcC1jYXJvdXNlbF9fbGlzdFwiKS5vbihcImFmdGVyQ2hhbmdlXCIsIGZ1bmN0aW9uIChldmVudCwgc2xpY2ssIGN1cnJlbnRTbGlkZSkge1xyXG4gIGlmIChzbGljay5jdXJyZW50U2xpZGUgKyAxIDwgMTApIHtcclxuICAgICQoXCIuZ2FsbGVyeV9fY3VycmVudC1pdGVtXCIpLnRleHQoJzAnICsgcGFyc2VJbnQoc2xpY2suY3VycmVudFNsaWRlICsgMSkpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAkKFwiLmdhbGxlcnlfX2N1cnJlbnQtaXRlbVwiKS50ZXh0KHBhcnNlSW50KHNsaWNrLmN1cnJlbnRTbGlkZSArIDEpKTtcclxuICB9O1xyXG4gIGlmIChzbGljay5zbGlkZUNvdW50IDwgMTApIHtcclxuICAgICQoXCIuZ2FsbGVyeV9fYWxsLWl0ZW1zXCIpLnRleHQoJzAnICsgcGFyc2VJbnQoc2xpY2suc2xpZGVDb3VudCkpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAkKFwiLmdhbGxlcnlfX2FsbC1pdGVtc1wiKS50ZXh0KHBhcnNlSW50KHNsaWNrLnNsaWRlQ291bnQpKTtcclxuICB9O1xyXG59KTtcclxuXHJcblxyXG5cclxuLy8g0YLQsNCx0LvQuNGG0YtcclxuXHJcbi8vINC90LDQu9C+0LbQtdC90LjQtSDRgtC10L3QuCDQvdCwINGE0LjQutGB0LjRgNC+0LLQsNC90L3Rg9GOINC60L7Qu9C+0L3QutGDINGC0LDQsdC70LjRhtGLXHJcbiQoXCIudGFibGUzXCIpLmNsb25lKHRydWUpLmFwcGVuZFRvKCcjdGFibGUzLWJveCcpLmFkZENsYXNzKCd0YWJsZS1jbG9uZScpO1xyXG5cclxuXHJcbnRyeSB7XHJcbiAgdmFyIGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YWJsZTMtd3JhcCcpO1xyXG5cclxuICB0YWJsZVNjcm9sbCgpO1xyXG5cclxuICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uICgpIHtcclxuICAgIHRhYmxlU2Nyb2xsKCk7XHJcbiAgfSk7XHJcbn0gY2F0Y2ggKGVycikge31cclxuXHJcbmZ1bmN0aW9uIHRhYmxlU2Nyb2xsKCkge1xyXG5cclxuICBpZiAoZGl2LnNjcm9sbFdpZHRoID4gZGl2LmNsaWVudFdpZHRoKSB7XHJcbiAgICAkKCcudGFibGUtY2xvbmUgdGQ6Zmlyc3QtY2hpbGQnKS5hZGRDbGFzcygnZml4ZWQtdGRfYWN0aXZlJyk7XHJcbiAgfSBlbHNlIHtcclxuICAgICQoJy50YWJsZS1jbG9uZSB0ZDpmaXJzdC1jaGlsZCcpLnJlbW92ZUNsYXNzKCdmaXhlZC10ZF9hY3RpdmUnKTtcclxuICB9O1xyXG59O1xyXG5cclxuXHJcbi8vIGZsaXBwaW5nXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgdmFyIGluaXRGbGlwcGluZyA9IGZ1bmN0aW9uIChibG9ja0NsYXNzLCBoZWFkZXJDbGFzcywgZm9vdGVyQ2xhc3MpIHtcclxuICAgIHZhciBhbmdsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYmxvY2tDbGFzcyk7XHJcbiAgICB2YXIgZmxhZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbmdsZV9fZmxhZycpO1xyXG4gICAgdmFyIGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaGVhZGVyQ2xhc3MpO1xyXG4gICAgdmFyIGZvb3RlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZm9vdGVyQ2xhc3MpO1xyXG5cclxuICAgIHZhciBvbkFuZ2xlTW91c2Vkb3duID0gZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdmFyIG1heFNpemUgPSB7fTtcclxuICAgICAgdmFyIGZvb3RDbGllbnRSZWN0ID0gZm9vdGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICB2YXIgZm9vdFNpemUgPSBNYXRoLnJvdW5kKGZvb3RDbGllbnRSZWN0LnRvcCk7XHJcbiAgICAgIG1heFNpemUuaGVpZ2h0ID0gaW5uZXJIZWlnaHQgLSAoaGVhZGVyLm9mZnNldEhlaWdodCArIDY4ICsgKGlubmVySGVpZ2h0IC0gZm9vdFNpemUpKTtcclxuICAgICAgZmxhZy5zdHlsZS5oZWlnaHQgPSBtYXhTaXplLmhlaWdodCArICdweCc7XHJcbiAgICAgIG1heFNpemUud2lkdGggPSBmbGFnLm9mZnNldFdpZHRoO1xyXG5cclxuICAgICAgdmFyIHN0YXJ0Q29vcmRpbmF0ZSA9IHtcclxuICAgICAgICB4OiBldnQuY2xpZW50WCxcclxuICAgICAgICB5OiBldnQuY2xpZW50WVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgdmFyIG9uQW5nbGVNb3VzZW1vdmUgPSBmdW5jdGlvbiAobW92ZUV2dCkge1xyXG4gICAgICAgIG1vdmVFdnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgdmFyIHNoaWZ0ID0ge1xyXG4gICAgICAgICAgeDogc3RhcnRDb29yZGluYXRlLnggLSBtb3ZlRXZ0LmNsaWVudFgsXHJcbiAgICAgICAgICB5OiBzdGFydENvb3JkaW5hdGUueSAtIG1vdmVFdnQuY2xpZW50WSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzdGFydENvb3JkaW5hdGUgPSB7XHJcbiAgICAgICAgICB4OiBtb3ZlRXZ0LmNsaWVudFgsXHJcbiAgICAgICAgICB5OiBtb3ZlRXZ0LmNsaWVudFlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgc2NhbGVCbG9jayA9IHtcclxuICAgICAgICAgIHdpZHRoOiBhbmdsZS5vZmZzZXRXaWR0aCArIHNoaWZ0LngsXHJcbiAgICAgICAgICBoZWlnaHQ6IGFuZ2xlLm9mZnNldEhlaWdodCArIHNoaWZ0LnlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzY2FsZUJsb2NrLndpZHRoIDw9IG1heFNpemUud2lkdGggJiYgc2NhbGVCbG9jay53aWR0aCA+IDEwMCkge1xyXG4gICAgICAgICAgYW5nbGUuc3R5bGUud2lkdGggPSBzY2FsZUJsb2NrLndpZHRoICsgJ3B4JztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzY2FsZUJsb2NrLmhlaWdodCA8PSBtYXhTaXplLmhlaWdodCAmJiBzY2FsZUJsb2NrLmhlaWdodCA+IDEwMCkge1xyXG4gICAgICAgICAgYW5nbGUuc3R5bGUuaGVpZ2h0ID0gc2NhbGVCbG9jay5oZWlnaHQgKyAncHgnO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIHZhciBvbkFuZ2xlTW91c2V1cCA9IGZ1bmN0aW9uICh1cEV2dCkge1xyXG4gICAgICAgIHVwRXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25BbmdsZU1vdXNlbW92ZSk7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG9uQW5nbGVNb3VzZXVwKTtcclxuICAgICAgICBhbmdsZS5zdHlsZS53aWR0aCA9ICcnO1xyXG4gICAgICAgIGFuZ2xlLnN0eWxlLmhlaWdodCA9ICcnO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25BbmdsZU1vdXNlbW92ZSk7XHJcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvbkFuZ2xlTW91c2V1cCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGlmIChhbmdsZSkge1xyXG4gICAgICBhbmdsZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbkFuZ2xlTW91c2Vkb3duKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBpbml0RmxpcHBpbmcoJy5hbmdsZScsICdoZWFkZXInLCAnZm9vdGVyJyk7XHJcbn0pKCk7XHJcblxyXG5cclxuLy8gc2VsZWN0cmljINGB0YLQuNC70LjQt9Cw0YbQuNGPIHNlbGVjdFxyXG5cclxuJCgnLmNoZWNrb3V0LWZvcm1fX3NlbGVjdCcpLnNlbGVjdHJpYygpO1xyXG4kKCcuY2hlY2tvdXQtZm9ybV9fc2VsZWN0MicpLnNlbGVjdHJpYygpO1xyXG4kKCcubWJsb2ctY2F0ZWctc2VsZWN0Jykuc2VsZWN0cmljKCk7XHJcblxyXG4kKFwiLmNoZWNrb3V0LWZvcm1fX3NlbGVjdFwiKS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gIGlmICgkKFwiLmNoZWNrb3V0LWZvcm1fX3NlbGVjdFwiKS52YWwoKSAhPSAnJykge1xyXG4gICAgJCgnLnNlbGVjdHJpYy1jaGVja291dC1mb3JtX19zZWxlY3Quc2VsZWN0cmljLWJlbG93IC5sYWJlbCcpLmNzcyh7XHJcbiAgICAgICdjb2xvcic6ICcjMTczODU3JyxcclxuICAgICAgJ2ZvbnQtc2l6ZSc6ICcxNHB4J1xyXG4gICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbiQoXCIuY2hlY2tvdXQtZm9ybV9fc2VsZWN0MlwiKS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gIGlmICgkKFwiLmNoZWNrb3V0LWZvcm1fX3NlbGVjdDJcIikudmFsKCkgIT0gJycpIHtcclxuICAgICQoJy5zZWxlY3RyaWMtY2hlY2tvdXQtZm9ybV9fc2VsZWN0Mi5zZWxlY3RyaWMtYmVsb3cgLmxhYmVsJykuY3NzKHtcclxuICAgICAgJ2NvbG9yJzogJyMxNzM4NTcnLFxyXG4gICAgICAnZm9udC1zaXplJzogJzE0cHgnXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuXHJcbi8vINCy0LDQu9C40LTQsNGG0LjRjyDRhNC+0YDQvFxyXG52YXIgcHJvZHVjdENoZWNrb3V0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9kdWN0LWNoZWNrb3V0LWZvcm0nKTtcclxuXHJcbnRyeSB7XHJcbiAgcHJvZHVjdENoZWNrb3V0Rm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgdmFyIG5hbWVDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hbWUtY2FyZCcpLFxyXG4gICAgICBzdGF0ZVByb3ZpbmNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N0YXRlLXByb3ZpbmNlJyksXHJcbiAgICAgIGFkZHJlc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkcmVzcycpLFxyXG4gICAgICBjaXR5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NpdHknKSxcclxuICAgICAgemlwQ29kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN6aXAtY29kZScpLFxyXG4gICAgICBlTWFpbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlLW1haWwnKSxcclxuICAgICAgY2FyZE51bWJlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjYXJkLW51bWJlcicpLFxyXG4gICAgICBzZWN1cml0eUNvZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2VjdXJpdHktY29kZScpLFxyXG4gICAgICBleHBpcmF0aW9uRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNleHBpcmF0aW9uLWRhdGUnKSxcclxuICAgICAgY291bnRyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb3VudHJ5JyksXHJcbiAgICAgIGNhcmRUeXBlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NhcmQtdHlwZScpO1xyXG5cclxuICAgIHZhciBwcm9kdWN0Q2hlY2tvdXRGb3JtRmllbGRzID0gW1xyXG4gICAgICBuYW1lQ2FyZCxcclxuICAgICAgc3RhdGVQcm92aW5jZSxcclxuICAgICAgYWRkcmVzcyxcclxuICAgICAgY2l0eSxcclxuICAgICAgemlwQ29kZSxcclxuICAgICAgZU1haWwsXHJcbiAgICAgIGNhcmROdW1iZXIsXHJcbiAgICAgIHNlY3VyaXR5Q29kZSxcclxuICAgICAgZXhwaXJhdGlvbkRhdGVcclxuICAgIF07XHJcblxyXG4gICAgdmFyIHByb2R1Y3RDaGVja291dEZvcm1TZWxlY3QgPSBbXHJcbiAgICAgIGNvdW50cnksXHJcbiAgICAgIGNhcmRUeXBlXHJcbiAgICBdO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvZHVjdENoZWNrb3V0Rm9ybUZpZWxkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAoIXByb2R1Y3RDaGVja291dEZvcm1GaWVsZHNbaV0udmFsdWUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgcHJvZHVjdENoZWNrb3V0Rm9ybUZpZWxkc1tpXS5jbGFzc0xpc3QuYWRkKCdlcnJvcicpO1xyXG4gICAgICAgIHByb2R1Y3RDaGVja291dEZvcm1GaWVsZHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdlcnJvcicpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZm9yICh2YXIgeSA9IDA7IHkgPCBwcm9kdWN0Q2hlY2tvdXRGb3JtU2VsZWN0Lmxlbmd0aDsgeSsrKSB7XHJcbiAgICAgIGlmIChwcm9kdWN0Q2hlY2tvdXRGb3JtU2VsZWN0W3ldLnZhbHVlID09ICcnKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICB2YXIgY2hlY2tvdXRGb3JtU2VsZWN0Q2xhc3MgPSAnLicgKyBwcm9kdWN0Q2hlY2tvdXRGb3JtU2VsZWN0W3ldLnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNsYXNzTGlzdFswXTtcclxuICAgICAgICB2YXIgc2VsZWN0cmljID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjaGVja291dEZvcm1TZWxlY3RDbGFzcyArIFwiIFwiICsgXCIuc2VsZWN0cmljXCIpO1xyXG5cclxuICAgICAgICBzZWxlY3RyaWMuY2xhc3NMaXN0LmFkZCgnZXJyb3InKTtcclxuICAgICAgICBwcm9kdWN0Q2hlY2tvdXRGb3JtU2VsZWN0W3ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIHByb2R1Y3RDaGVja291dEZvcm1TZWxlY3RbeV0uY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH0pO1xyXG59IGNhdGNoIChlcnIpIHt9XHJcblxyXG5cclxuXHJcblxyXG52YXIgcHJvZHVjdENoZWNrb3V0Rm9ybTEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvZHVjdC1jaGVja291dC1mb3JtMScpO1xyXG5cclxudHJ5IHtcclxuICBwcm9kdWN0Q2hlY2tvdXRGb3JtMS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgdmFyIG5hbWUxID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hbWUxJyksXHJcbiAgICAgIGVNYWlsMSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlLW1haWwxJyksXHJcbiAgICAgIG1lc3NhZ2UxID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lc3NhZ2UxJyk7XHJcblxyXG4gICAgdmFyIHByb2R1Y3RDaGVja291dEZvcm1GaWVsZHMgPSBbXHJcbiAgICAgIG5hbWUxLFxyXG4gICAgICBlTWFpbDEsXHJcbiAgICAgIG1lc3NhZ2UxXHJcbiAgICBdO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvZHVjdENoZWNrb3V0Rm9ybUZpZWxkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAoIXByb2R1Y3RDaGVja291dEZvcm1GaWVsZHNbaV0udmFsdWUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgcHJvZHVjdENoZWNrb3V0Rm9ybUZpZWxkc1tpXS5jbGFzc0xpc3QuYWRkKCdlcnJvcicpO1xyXG4gICAgICAgIHByb2R1Y3RDaGVja291dEZvcm1GaWVsZHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdlcnJvcicpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfSk7XHJcbn0gY2F0Y2ggKGVycikge31cclxuXHJcblxyXG52YXIgcHJvZHVjdENoZWNrb3V0Rm9ybTIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvZHVjdC1jaGVja291dC1mb3JtMicpO1xyXG5cclxudHJ5IHtcclxuICBwcm9kdWN0Q2hlY2tvdXRGb3JtMi5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgdmFyIG5hbWUxID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hbWUyJyksXHJcbiAgICAgIGVNYWlsMSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlLW1haWwyJyksXHJcbiAgICAgIG1lc3NhZ2UxID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lc3NhZ2UyJyk7XHJcblxyXG4gICAgdmFyIHByb2R1Y3RDaGVja291dEZvcm1GaWVsZHMgPSBbXHJcbiAgICAgIG5hbWUxLFxyXG4gICAgICBlTWFpbDEsXHJcbiAgICAgIG1lc3NhZ2UxXHJcbiAgICBdO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvZHVjdENoZWNrb3V0Rm9ybUZpZWxkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAoIXByb2R1Y3RDaGVja291dEZvcm1GaWVsZHNbaV0udmFsdWUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgcHJvZHVjdENoZWNrb3V0Rm9ybUZpZWxkc1tpXS5jbGFzc0xpc3QuYWRkKCdlcnJvcicpO1xyXG4gICAgICAgIHByb2R1Y3RDaGVja291dEZvcm1GaWVsZHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdlcnJvcicpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfSk7XHJcbn0gY2F0Y2ggKGVycikge30iXX0=
